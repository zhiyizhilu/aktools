name: aktools
labels:
  okteto.auto-create: "true" # 在创建开发环境时自动创建应用程序
image: notcounted/aktools:latest
command:
  - /bin/sh
  - -c
  - gunicorn --bind 0.0.0.0:8080 main:app -k uvicorn.workers.UvicornWorker
securityContext:
  capabilities:
    add:
      - NET_ADMIN # 添加安全操作限制能力
ports:
  - name: http
    containerPort: 8080 # 允许 Okteto 访问的端口
volumes:
  - name: app
    mountPath: /usr/local/lib/python3.11/site-packages/aktools/
  - name: dev
    mountPath: /usr/src/app